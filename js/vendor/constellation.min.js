!function(n,d){var s=n(d);function o(o,t){var h=n(o),e=o.getContext("2d"),i={star:{color:"rgba(255, 255, 255, .5)",width:1,randomWidth:!0},line:{color:"rgba(255, 255, 255, .5)",width:.2},position:{x:0,y:0},width:d.innerWidth,height:d.innerHeight,velocity:.1,velocityChaos:8e-4,length:100,distance:120,radius:150,initStars:[],stars:[]},a=n.extend(!0,{},i,t);function r(t,i){this.x=t||Math.random()*o.width,this.y=i||Math.random()*o.height,this.vx=a.velocity*(Math.random()-.5),this.vy=a.velocity*(Math.random()-.5),this.radius=a.star.randomWidth?Math.random()*a.star.width:a.star.width}r.prototype={draw:function(){e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),e.fill()},animate:function(){var t;for(t=0;t<a.length;t++){var i=a.stars[t];(i.y<0||i.y>o.height||Math.random()<a.velocityChaos)&&(i.vy=-i.vy),(i.x<0||i.x>o.width||Math.random()<a.velocityChaos)&&(i.vx=-i.vx),i.x+=i.vx,i.y+=i.vy}},line:function(){var t,i,n,o,s=a.length;for(n=0;n<s;n++)for(o=0;o<s;o++)t=a.stars[n],i=a.stars[o],t.x-i.x<a.distance&&t.y-i.y<a.distance&&t.x-i.x>-a.distance&&t.y-i.y>-a.distance&&t.x-a.position.x<a.radius&&t.y-a.position.y<a.radius&&t.x-a.position.x>-a.radius&&t.y-a.position.y>-a.radius&&(e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(i.x,i.y),e.stroke(),e.closePath())}},this.createStars=function(){var t,i=a.length,n=a.initStars;for(t=0;t<n.length&&t<i;t++){var o=n[t],s=o.x*d.innerWidth,e=o.y*h.height()+h.height()/2;a.stars.push(new r(s,e))}for(;t<i;t++)a.stars.push(new r)},this.animateStars=function(){var t,i=a.length;e.clearRect(0,0,o.width,o.height);for(var n=0;n<i;n++)(t=a.stars[n]).draw();t.line(),t.animate()},this.setCanvas=function(){o.width=a.width,o.height=a.height},this.setContext=function(){e.fillStyle=a.star.color,e.strokeStyle=a.line.color,e.lineWidth=a.line.width},this.setInitialPosition=function(){t&&t.hasOwnProperty("position")||(a.position={x:.5*o.width,y:.5*o.height})},this.loop=function(t){t(),this.rAF=d.requestAnimationFrame(function(){this.loop(t)}.bind(this))},this.handlers={window:{mousemove:function(t){a.position.x=t.pageX-h.offset().left,a.position.y=t.pageY-h.offset().top},resize:function(){d.cancelAnimationFrame(this.rAF)}}},this.bind=function(){s.on("mousemove",this.handlers.window.mousemove).on("resize",this.handlers.window.resize.bind(this))},this.unbind=function(){s.off("mousemove",this.handlers.window.mousemove).off("resize",this.handlers.window.resize)},this.init=function(){this.setCanvas(),this.setContext(),this.createStars(),this.setInitialPosition(),this.loop(this.animateStars),this.bind()}}function i(t,i){new o(t,i).init()}n.fn.constellation=function(t){return this.each(function(){s.on("resize",function(){i(this,t)}),i(this,t)})}}($,window);